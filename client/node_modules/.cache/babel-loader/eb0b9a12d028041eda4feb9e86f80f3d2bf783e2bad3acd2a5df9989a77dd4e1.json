{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dericks.MIDMUNIC\\\\Documents\\\\ReUseCampusHub\\\\client\\\\src\\\\components\\\\MapView.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapView = () => {\n  _s();\n  const mapRef = useRef(null);\n  const [items, setItems] = useState([]);\n  const [mapLoaded, setMapLoaded] = useState(false);\n\n  // Load Google Maps script\n  useEffect(() => {\n    const loadMapScript = () => {\n      const existingScript = document.getElementById('googleMaps');\n      if (!existingScript) {\n        const script = document.createElement('script');\n        script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyCIho9p8rGILl7OsjimbOMjsEn0SaaxrQE';\n        script.id = 'googleMaps';\n        script.async = true;\n        script.defer = true;\n        script.onload = () => setMapLoaded(true);\n        document.head.appendChild(script);\n      } else {\n        setMapLoaded(true);\n      }\n    };\n    loadMapScript();\n  }, []);\n\n  // Fetch items\n  useEffect(() => {\n    const fetchItems = async () => {\n      try {\n        const response = await fetch('http://localhost:5000/api/items');\n        const data = await response.json();\n        setItems(data);\n      } catch (error) {\n        console.error('Error fetching items:', error);\n      }\n    };\n    fetchItems();\n  }, []);\n\n  // Initialize map after both items and map script are ready\n  useEffect(() => {\n    if (mapLoaded && items.length > 0 && mapRef.current) {\n      const defaultCenter = {\n        lat: -25.7676,\n        lng: 29.4648\n      }; // Middelburg\n      const map = new window.google.maps.Map(mapRef.current, {\n        center: defaultCenter,\n        zoom: 12\n      });\n      const bounds = new window.google.maps.LatLngBounds();\n      items.forEach(item => {\n        try {\n          const loc = JSON.parse(item.location);\n          if (loc !== null && loc !== void 0 && loc.lat && loc !== null && loc !== void 0 && loc.lng) {\n            const position = {\n              lat: loc.lat,\n              lng: loc.lng\n            };\n            new window.google.maps.Marker({\n              position,\n              map,\n              title: item.title\n            });\n            bounds.extend(position);\n          }\n        } catch (e) {\n          console.warn('Invalid location data for item:', item.id);\n        }\n      });\n\n      // Fit map to show all markers\n      if (!bounds.isEmpty()) {\n        map.fitBounds(bounds);\n      }\n    }\n  }, [mapLoaded, items]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      height: '100vh',\n      width: '100%'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 10\n  }, this);\n};\n_s(MapView, \"SKqJN37CmtbYWz7vhYXrGxUin2E=\");\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","MapView","_s","mapRef","items","setItems","mapLoaded","setMapLoaded","loadMapScript","existingScript","document","getElementById","script","createElement","src","id","async","defer","onload","head","appendChild","fetchItems","response","fetch","data","json","error","console","length","current","defaultCenter","lat","lng","map","window","google","maps","Map","center","zoom","bounds","LatLngBounds","forEach","item","loc","JSON","parse","location","position","Marker","title","extend","e","warn","isEmpty","fitBounds","ref","style","height","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/dericks.MIDMUNIC/Documents/ReUseCampusHub/client/src/components/MapView.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\nconst MapView = () => {\r\n  const mapRef = useRef(null);\r\n  const [items, setItems] = useState([]);\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n\r\n  // Load Google Maps script\r\n  useEffect(() => {\r\n    const loadMapScript = () => {\r\n      const existingScript = document.getElementById('googleMaps');\r\n\r\n      if (!existingScript) {\r\n        const script = document.createElement('script');\r\n        script.src =\r\n          'https://maps.googleapis.com/maps/api/js?key=AIzaSyCIho9p8rGILl7OsjimbOMjsEn0SaaxrQE';\r\n        script.id = 'googleMaps';\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.onload = () => setMapLoaded(true);\r\n        document.head.appendChild(script);\r\n      } else {\r\n        setMapLoaded(true);\r\n      }\r\n    };\r\n\r\n    loadMapScript();\r\n  }, []);\r\n\r\n  // Fetch items\r\n  useEffect(() => {\r\n    const fetchItems = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:5000/api/items');\r\n        const data = await response.json();\r\n        setItems(data);\r\n      } catch (error) {\r\n        console.error('Error fetching items:', error);\r\n      }\r\n    };\r\n\r\n    fetchItems();\r\n  }, []);\r\n\r\n  // Initialize map after both items and map script are ready\r\n  useEffect(() => {\r\n    if (mapLoaded && items.length > 0 && mapRef.current) {\r\n      const defaultCenter = { lat: -25.7676, lng: 29.4648 }; // Middelburg\r\n      const map = new window.google.maps.Map(mapRef.current, {\r\n        center: defaultCenter,\r\n        zoom: 12,\r\n      });\r\n\r\n      const bounds = new window.google.maps.LatLngBounds();\r\n\r\n      items.forEach((item) => {\r\n        try {\r\n          const loc = JSON.parse(item.location);\r\n          if (loc?.lat && loc?.lng) {\r\n            const position = { lat: loc.lat, lng: loc.lng };\r\n            new window.google.maps.Marker({\r\n              position,\r\n              map,\r\n              title: item.title,\r\n            });\r\n            bounds.extend(position);\r\n          }\r\n        } catch (e) {\r\n          console.warn('Invalid location data for item:', item.id);\r\n        }\r\n      });\r\n\r\n      // Fit map to show all markers\r\n      if (!bounds.isEmpty()) {\r\n        map.fitBounds(bounds);\r\n      }\r\n    }\r\n  }, [mapLoaded, items]);\r\n\r\n  return <div ref={mapRef} style={{ height: '100vh', width: '100%' }} />;\r\n};\r\n\r\nexport default MapView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}