{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const ExchangeStatus=_ref=>{let{itemId,currentUserId,senderId,receiverId}=_ref;const[status,setStatus]=useState('pending');const[initiatorId,setInitiatorId]=useState(null);useEffect(()=>{const fetchStatus=async()=>{try{const res=await fetch(\"http://localhost:5000/api/exchange/status/\".concat(itemId));const data=await res.json();setStatus(data.status);}catch(err){console.error('Error fetching status:',err);}};fetchStatus();},[itemId]);const updateStatus=async newStatus=>{try{await fetch('http://localhost:5000/api/exchange/status',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({itemId,status:newStatus})});setStatus(newStatus);}catch(err){console.error('Error updating status:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"exchange-status\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Exchange Status: \",status]}),status==='pending'&&currentUserId===senderId&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatus('exchange'),children:\"Request Exchange\"}),status==='exchange'&&currentUserId===receiverId&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatus('approved'),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatus('rejected'),children:\"Reject\"})]}),status==='approved'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatus('completed'),children:\"Mark as Completed\"}),status==='completed'&&/*#__PURE__*/_jsx(\"p\",{children:\"\\u2705 Exchange Completed\"})]});};export default ExchangeStatus;","map":{"version":3,"names":["React","useEffect","useState","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","ExchangeStatus","_ref","itemId","currentUserId","senderId","receiverId","status","setStatus","initiatorId","setInitiatorId","fetchStatus","res","fetch","concat","data","json","err","console","error","updateStatus","newStatus","method","headers","body","JSON","stringify","className","children","onClick"],"sources":["C:/Users/dericks.MIDMUNIC/Documents/ReUseCampusHub/client/src/components/ExchangeStatus.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nconst ExchangeStatus = ({ itemId, currentUserId, senderId, receiverId }) => {\r\n  const [status, setStatus] = useState('pending');\r\n  const [initiatorId, setInitiatorId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchStatus = async () => {\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/api/exchange/status/${itemId}`);\r\n        const data = await res.json();\r\n        setStatus(data.status);\r\n      } catch (err) {\r\n        console.error('Error fetching status:', err);\r\n      }\r\n    };\r\n    fetchStatus();\r\n  }, [itemId]);\r\n\r\n  const updateStatus = async (newStatus) => {\r\n    try {\r\n      await fetch('http://localhost:5000/api/exchange/status', {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ itemId, status: newStatus }),\r\n      });\r\n      setStatus(newStatus);\r\n    } catch (err) {\r\n      console.error('Error updating status:', err);\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  return (\r\n    <div className=\"exchange-status\">\r\n      <h4>Exchange Status: {status}</h4>\r\n      {status === 'pending' && currentUserId === senderId && (\r\n        <button onClick={() => updateStatus('exchange')}>Request Exchange</button>\r\n      )}\r\n      {status === 'exchange' && currentUserId === receiverId && (\r\n        <>\r\n          <button onClick={() => updateStatus('approved')}>Approve</button>\r\n          <button onClick={() => updateStatus('rejected')}>Reject</button>\r\n        </>\r\n      )}\r\n      {status === 'approved' && (\r\n        <button onClick={() => updateStatus('completed')}>Mark as Completed</button>\r\n      )}\r\n      {status === 'completed' && <p>âœ… Exchange Completed</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExchangeStatus;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEnD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAqD,IAApD,CAAEC,MAAM,CAAEC,aAAa,CAAEC,QAAQ,CAAEC,UAAW,CAAC,CAAAJ,IAAA,CACrE,KAAM,CAACK,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,SAAS,CAAC,CAC/C,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAEpDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,8CAAAC,MAAA,CAA8CX,MAAM,CAAE,CAAC,CAC9E,KAAM,CAAAY,IAAI,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,CAAC,CAC7BR,SAAS,CAACO,IAAI,CAACR,MAAM,CAAC,CACxB,CAAE,MAAOU,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAEF,GAAG,CAAC,CAC9C,CACF,CAAC,CACDN,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,CAACR,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAiB,YAAY,CAAG,KAAO,CAAAC,SAAS,EAAK,CACxC,GAAI,CACF,KAAM,CAAAR,KAAK,CAAC,2CAA2C,CAAE,CACvDS,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEvB,MAAM,CAAEI,MAAM,CAAEc,SAAU,CAAC,CACpD,CAAC,CAAC,CACFb,SAAS,CAACa,SAAS,CAAC,CACtB,CAAE,MAAOJ,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAEF,GAAG,CAAC,CAC9C,CACF,CAAC,CAID,mBACErB,KAAA,QAAK+B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BhC,KAAA,OAAAgC,QAAA,EAAI,mBAAiB,CAACrB,MAAM,EAAK,CAAC,CACjCA,MAAM,GAAK,SAAS,EAAIH,aAAa,GAAKC,QAAQ,eACjDP,IAAA,WAAQ+B,OAAO,CAAEA,CAAA,GAAMT,YAAY,CAAC,UAAU,CAAE,CAAAQ,QAAA,CAAC,kBAAgB,CAAQ,CAC1E,CACArB,MAAM,GAAK,UAAU,EAAIH,aAAa,GAAKE,UAAU,eACpDV,KAAA,CAAAI,SAAA,EAAA4B,QAAA,eACE9B,IAAA,WAAQ+B,OAAO,CAAEA,CAAA,GAAMT,YAAY,CAAC,UAAU,CAAE,CAAAQ,QAAA,CAAC,SAAO,CAAQ,CAAC,cACjE9B,IAAA,WAAQ+B,OAAO,CAAEA,CAAA,GAAMT,YAAY,CAAC,UAAU,CAAE,CAAAQ,QAAA,CAAC,QAAM,CAAQ,CAAC,EAChE,CACH,CACArB,MAAM,GAAK,UAAU,eACpBT,IAAA,WAAQ+B,OAAO,CAAEA,CAAA,GAAMT,YAAY,CAAC,WAAW,CAAE,CAAAQ,QAAA,CAAC,mBAAiB,CAAQ,CAC5E,CACArB,MAAM,GAAK,WAAW,eAAIT,IAAA,MAAA8B,QAAA,CAAG,2BAAoB,CAAG,CAAC,EACnD,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3B,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}