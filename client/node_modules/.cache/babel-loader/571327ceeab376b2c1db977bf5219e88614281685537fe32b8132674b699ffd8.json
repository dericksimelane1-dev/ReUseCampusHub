{"ast":null,"code":"import React,{useEffect,useState}from'react';import'../styles/EcoPoints.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EcoPoints=()=>{const[todayPoints,setTodayPoints]=useState(0);const[leaderboard,setLeaderboard]=useState([]);const[currentUser,setCurrentUser]=useState(null);useEffect(()=>{try{const storedUser=localStorage.getItem('currentUser');if(storedUser&&storedUser!==\"undefined\"){setCurrentUser(JSON.parse(storedUser));}else{console.warn(\"EcoPoints: currentUser is missing or invalid.\");}}catch(err){console.error(\"Error parsing currentUser from localStorage:\",err);}},[]);useEffect(()=>{if(!currentUser||!currentUser.full_name)return;// Fetch today's points\nfetch(\"http://localhost:5000/api/todayPoints?name=\".concat(encodeURIComponent(currentUser.full_name))).then(res=>{if(!res.ok)throw new Error(\"Failed to fetch today's points\");return res.json();}).then(data=>{if(data&&typeof data.points==='number'){setTodayPoints(data.points);}}).catch(err=>console.error(\"Error fetching today's points:\",err));// Fetch leaderboard\nfetch('http://localhost:5000/api/leaderboard').then(res=>{if(!res.ok)throw new Error(\"Failed to fetch leaderboard\");return res.json();}).then(data=>{if(Array.isArray(data)){setLeaderboard(data);}else{console.error('Leaderboard data is not an array:',data);}}).catch(err=>console.error('Error fetching leaderboard:',err));},[currentUser]);return/*#__PURE__*/_jsxs(\"div\",{className:\"eco-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Eco Points\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"points\",children:[\"Points Earned Today: \",todayPoints]}),/*#__PURE__*/_jsxs(\"div\",{className:\"leaderboard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Leaderboard\"}),leaderboard.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No leaderboard data available.\"}):/*#__PURE__*/_jsx(\"ul\",{children:leaderboard.map((user,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"#\",index+1,\" - \",user.full_name,\": \",user.points,\" pts\",user.points>=100&&/*#__PURE__*/_jsx(\"span\",{children:\" \\u2B50\\uFE0F\"})]},index))})]})]});};export default EcoPoints;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","EcoPoints","todayPoints","setTodayPoints","leaderboard","setLeaderboard","currentUser","setCurrentUser","storedUser","localStorage","getItem","JSON","parse","console","warn","err","error","full_name","fetch","concat","encodeURIComponent","then","res","ok","Error","json","data","points","catch","Array","isArray","className","children","length","map","user","index"],"sources":["C:/Users/dericks.MIDMUNIC/Documents/ReUseCampusHub/client/src/components/EcoPoints.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport '../styles/EcoPoints.css';\r\n\r\nconst EcoPoints = () => {\r\n  const [todayPoints, setTodayPoints] = useState(0);\r\n  const [leaderboard, setLeaderboard] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const storedUser = localStorage.getItem('currentUser');\r\n      if (storedUser && storedUser !== \"undefined\") {\r\n        setCurrentUser(JSON.parse(storedUser));\r\n      } else {\r\n        console.warn(\"EcoPoints: currentUser is missing or invalid.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error parsing currentUser from localStorage:\", err);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!currentUser || !currentUser.full_name) return;\r\n\r\n    // Fetch today's points\r\n    fetch(`http://localhost:5000/api/todayPoints?name=${encodeURIComponent(currentUser.full_name)}`)\r\n      .then(res => {\r\n        if (!res.ok) throw new Error(\"Failed to fetch today's points\");\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        if (data && typeof data.points === 'number') {\r\n          setTodayPoints(data.points);\r\n        }\r\n      })\r\n      .catch(err => console.error(\"Error fetching today's points:\", err));\r\n\r\n    // Fetch leaderboard\r\n    fetch('http://localhost:5000/api/leaderboard')\r\n      .then(res => {\r\n        if (!res.ok) throw new Error(\"Failed to fetch leaderboard\");\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        if (Array.isArray(data)) {\r\n          setLeaderboard(data);\r\n        } else {\r\n          console.error('Leaderboard data is not an array:', data);\r\n        }\r\n      })\r\n      .catch(err => console.error('Error fetching leaderboard:', err));\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <div className=\"eco-container\">\r\n      <h1>Eco Points</h1>\r\n      <p className=\"points\">Points Earned Today: {todayPoints}</p>\r\n\r\n      <div className=\"leaderboard\">\r\n        <h2>Leaderboard</h2>\r\n        {leaderboard.length === 0 ? (\r\n          <p>No leaderboard data available.</p>\r\n        ) : (\r\n          <ul>\r\n            {leaderboard.map((user, index) => (\r\n              <li key={index}>\r\n                #{index + 1} - {user.full_name}: {user.points} pts\r\n                {user.points >= 100 && <span> ⭐️</span>}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EcoPoints;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}